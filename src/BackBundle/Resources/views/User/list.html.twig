{% extends "BackBundle::layout.html.twig" %}{#Include CSS#}  {% block stylesheets %}      {{ parent() }}      {% stylesheets      'https://cdn.datatables.net/1.10.11/css/jquery.dataTables.min.css'      'bundles/back/css/tables.css'      'bundles/back/css/style.css'      filter='cssrewrite' %}      <link rel="stylesheet" href="{{ asset_url }}"/>      {% endstylesheets %}      <style type="text/css">      </style>  {% endblock stylesheets %}    {% block title %}    Liste des utilisateurs | {{ parent() }}{% endblock %}{# HEADER #}    {% block header_breadcrumb %}        <li>            <span>Liste des utilisateurs</span>        </li>    {% endblock header_breadcrumb %}{% block action_toolbar %}    <div class="btn-group pull-right">        <a href="{{ path('back_user_add') }}" title="Ajouter un customer"           class="btn btn-sm btn-block green btn-outline"><span class="fa fa-plus"></span> Ajouter un            utilisateur</a>    </div>{% endblock action_toolbar %}    {#{% block page_title %}Clients{% endblock page_title %}#}    {#{% block page_sub_title %}#}        {#<small>Liste</small>{% endblock page_sub_title %}#}{% block back_body %}    <div class="row" id="">        <div class="col-md-12 col-sm-12 margin-top-20">            <!-- BEGIN Portlet PORTLET-->            <div class="portlet">                <div class="portlet-title ">                    <div class="caption font-green-sharp">                        <i class="icon-user font-green-sharp"></i>                        <span class="caption-subject bold uppercase"> Utilisateurs</span>                        {% if users is defined %}                            <span class="caption-helper">  Total: {{ users | length }}</span>                        {% endif %}                    </div>                 </div>                <div class="portlet-body">                    {% include('BackBundle:Includes:alert.html.twig') %}                    <div class="row">                        <!-- BEGIN Row-->                        <div class="col-sm-12">                    <ul class="nav nav-tabs">                        <li {% if ou is not defined %} class="active" {% endif %}>                            <a href="{{ path('back_user_list') }}"> Tout </a>                        </li>                        <li {% if ou is defined %} {% if ou == "Issy-Les-Moulineaux" %} class="active" {% endif %}{% endif %}>                            <a href="{{ path('back_user_by_ou',{'ou': 'Issy-Les-Moulineaux'}) }}"> Issy-Les-Moulineaux </a>                        </li>                        <li {% if ou is defined %} {% if ou == "Luxembourg" %} class="active" {% endif %}{% endif %}>                            <a href="{{ path('back_user_by_ou',{'ou': 'Luxembourg'}) }}"> Luxembourg </a>                        </li>                        <li {% if ou is defined %} {% if ou == "Saint-mande" %} class="active" {% endif %}{% endif %}>                            <a href="{{ path('back_user_by_ou',{'ou': 'Saint-mande'}) }}"> Saint-Mandé </a>                        </li>                        <li {% if ou is defined %} {% if ou == "Maroc" %} class="active" {% endif %}{% endif %}>                            <a href="{{ path('back_user_by_ou',{'ou': 'Maroc'}) }}"> Maroc </a>                        </li>                        <li {% if ou is defined %} {% if ou == "Bloqués" %} class="active" {% endif %}{% endif %}>                            <a href="{{ path('back_user_filter',{'filter': 'locked'}) }}"> Bloqués </a>                        </li>                        <li {% if ou is defined %} {% if ou == "Désactivés" %} class="active" {% endif %}{% endif %}>                            <a href="{{ path('back_user_filter',{'filter': 'disabled'}) }}"> Désactivés </a>                        </li>                        <li {% if ou is defined %} {% if ou == "Expirés" %} class="active" {% endif %}{% endif %}>                                <a href="{{ path('back_user_filter',{'filter': 'expires'}) }}"> Expirés </a>                        </li>                    </ul>                        </div>                        {% if users is defined %}                            <div class="col-sm-12">                                <table class="table table-condensed table-hover" id="table-users">                                    <thead>                                    <tr>                                        <th class="col-md-2">Login</th>                                        <th class="col-md-2">Nom</th>                                        <th class="col-md-4">Email</th>                                        <th class="col-md-4 text-center">Actions</th>                                    </tr>                                    </thead>                                    <tbody>                                    {% for key, user in users %}                                        {% set userprincipalname =ldap_service.getData(user,"userprincipalname") %}                                        {% if  ( userprincipalname is not null and  userprincipalname != ldap_user) %}                                            <tr id="line-{{ key }}">                                                {#<td class="col-md-2">{{ key }}</td>#}                                                <td class="col-md-2">{{ ldap_service.getData(user,"samaccountname") }}</td>                                                <td class="col-md-3">{{ ldap_service.getData(user,"displayname") }}</td>                                                <td class="col-md-4">{{ userprincipalname }}</td>                                                <td class="col-md-3 text-center">                                                    {% set login=ldap_service.getData(user,"userprincipalname") %}                                                    {% set dn=ldap_service.getData(user,"distinguishedname") %}                                                    {#{{ path('get_user',{'login':login }) }}#}                                                    <button type="button" data-toggle="modal"                                                            data-user="{{ ldap_service.base64Encode(dn) }}"                                                            class="btn btn-xs btn-outline btn-user-info green"><i                                                                class="fa fa-eye fa-fw"></i> Voir                                                    </button>                                                    <a href="{{ path('back_user_edit',{'login':ldap_service.getData(user,"samaccountname") }) }}"                                                       class="btn btn-xs btn-outline blue"><i                                                                class="fa fa-edit fa-fw"></i> Edit</a>                                                    {% if ldap_service.getData(user,"samaccountname") != "Administrator" %}                                                        <button type="button"                                                                class="btn btn-xs  btn-outline red btn-remove"                                                                data-action="remove-user"                                                                id="{{ ldap_service.getData(user,"cn") }}"                                                                data-tree="{{ dn }}"                                                                data-line="line-{{ key }}"><i                                                                    class="fa fa-trash-o fa-fw"></i>Supp                                                        </button>                                                    {% endif %}                                                </td>                                            </tr>                                        {% endif %}                                    {% endfor %}                                    </tbody>                                </table>                                <div class="text-center">                                    {#{{ knp_pagination_render(customers) }}#}                                </div>                            </div>                        {% endif %}                        {#{{ dump(customers) }}#}                        <!-- End Row-->                    </div>                </div>            </div>        </div>    </div>{% endblock back_body %}{% block javascripts %}    {{ parent() }}    {% javascripts    "bundles/back/theme/assets/global/plugins/datatables/datatables.min.js"    "bundles/back/js/ad/dataTable.js"    "bundles/back/js/ad/app.js" %}    <script src="{{ asset_url }}"></script>    {% endjavascripts %}{% endblock %}